name: handle-mcdata-update
on:
  workflow_dispatch:
    inputs:
      version:
        description: 'What new version is like `1.21.6`'
        required: true
        default: '1.21.6'
      pr_number:
        description: 'What is the relevant minecraft-data PR URL?'
        required: false
      issue_number:
        description: 'What is the relevant minecraft-data issue?'
        required: false

jobs:
  update-mcdata:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: true
      - run: npm install # install gh-helpers
      - run: node .github/commands/bump.js ${{ github.event.inputs.version }}
        env:
          MC_VERSION: ${{ github.event.inputs.version }}
          MCDATA_PULL_NO: ${{ github.event.inputs.pr_number }}
          MCDATA_ISSUE_NO: ${{ github.event.inputs.issue_number }}
          GITHUB_TOKEN: ${{ secrets.PAT_PASSWORD }}
